/* (c) Poll/Vote: souravkl11/raganork
You may not use this file except compliance with license!*/
var _0x2d277c=_0x93dc;(function(_0x3eba32,_0x468a32){var _0x113d4e=_0x93dc,_0x55d76a=_0x3eba32();while(!![]){try{var _0x971f7b=parseInt(_0x113d4e(0x1d9))/0x1*(-parseInt(_0x113d4e(0x1dc))/0x2)+parseInt(_0x113d4e(0x1f6))/0x3*(-parseInt(_0x113d4e(0x1d0))/0x4)+-parseInt(_0x113d4e(0x1d3))/0x5+-parseInt(_0x113d4e(0x1de))/0x6*(-parseInt(_0x113d4e(0x1f2))/0x7)+-parseInt(_0x113d4e(0x1ef))/0x8*(parseInt(_0x113d4e(0x1d8))/0x9)+parseInt(_0x113d4e(0x1cf))/0xa*(-parseInt(_0x113d4e(0x1ec))/0xb)+-parseInt(_0x113d4e(0x1dd))/0xc*(-parseInt(_0x113d4e(0x1d7))/0xd);if(_0x971f7b===_0x468a32)break;else _0x55d76a['push'](_0x55d76a['shift']());}catch(_0x4a6a36){_0x55d76a['push'](_0x55d76a['shift']());}}}(_0x2a9d,0x5a873));let {addCommand}=require('../events'),{MessageType,Mimetype}=require('@adiwajshing/baileys'),w=require('../config'),v=w['SESSION'],{addPoll,newPoll,deletePoll,getPoll}=require(_0x2d277c(0x1e8)),fm=w[_0x2d277c(0x1f3)]==_0x2d277c(0x1da)?![]:!![];addCommand({'pattern':_0x2d277c(0x1e3),'fromMe':!![],'desc':_0x2d277c(0x1d1)},async(_0x1ebe11,_0x4b420b)=>{var _0x43aab8=_0x2d277c,_0x46ae9a=_0x1ebe11[_0x43aab8(0x1ce)][_0x43aab8(0x1ed)][_0x43aab8(0x1d4)][_0x43aab8(0x1ee)]('@')[0x0],_0x2a0c9c=_0x1ebe11[_0x43aab8(0x1d4)];if(!_0x2a0c9c[_0x43aab8(0x1e6)](_0x43aab8(0x1e7)))return await _0x1ebe11[_0x43aab8(0x1e5)]('_Only\x20works\x20in\x20groups!_');if(!_0x4b420b[0x1])return await message['sendMessage'](_0x43aab8(0x1d5));var _0x13a401=_0x4b420b[0x1][_0x43aab8(0x1ee)]('/')[0x1]['split'](',')[0x0],_0x2994a7=_0x4b420b[0x1][_0x43aab8(0x1ee)]('/')[0x2][_0x43aab8(0x1ee)](',')[0x0],_0x1272d1=_0x4b420b[0x1][_0x43aab8(0x1ee)]('/')[0x3][_0x43aab8(0x1ee)](',')[0x0],_0x31adc1=_0x4b420b[0x1][_0x43aab8(0x1ee)]('/')[0x4][_0x43aab8(0x1ee)](',')[0x0],_0x281dfe=_0x4b420b[0x1]['split']('/')[0x5]?_0x4b420b[0x1][_0x43aab8(0x1ee)]('/')[0x5][_0x43aab8(0x1ee)](',')[0x0]:null;await newPoll(_0x46ae9a,_0x2a0c9c,_0x13a401,_0x1272d1,_0x31adc1,_0x281dfe,v);if(_0x281dfe!==null)var _0x9e48eb=[{'title':_0x1272d1,'description':'','rowId':_0x43aab8(0x1df)},{'title':_0x31adc1,'description':'','rowId':_0x43aab8(0x1e9)},{'title':_0x281dfe,'description':'','rowId':'vote;three'}];else var _0x9e48eb=[{'title':_0x1272d1,'description':'','rowId':_0x43aab8(0x1df)},{'title':_0x31adc1,'description':'','rowId':_0x43aab8(0x1e9)}];const _0x1cecf1=[{'title':_0x13a401,'rows':_0x9e48eb}],_0x4fe1f4={'buttonText':_0x2994a7,'description':_0x13a401,'sections':_0x1cecf1,'listType':0x1};await _0x1ebe11[_0x43aab8(0x1ce)][_0x43aab8(0x1e5)](_0x2a0c9c,_0x4fe1f4,MessageType['listMessage']);}),addCommand({'on':_0x2d277c(0x1d6),'fromMe':fm},async(_0x5cb25d,_0x8ade18)=>{var _0x5e1871=_0x2d277c;if(!_0x5cb25d['list'][_0x5e1871(0x1eb)](_0x5e1871(0x1f1)))return;var _0x4223fe=_0x5cb25d[_0x5e1871(0x1d2)][_0x5e1871(0x1ee)](';')[0x1],_0x53d647=_0x5cb25d['client'][_0x5e1871(0x1ed)][_0x5e1871(0x1d4)][_0x5e1871(0x1ee)]('@')[0x0],_0x1a62ea=_0x5cb25d['jid'],_0x109efd=await addPoll(_0x53d647,_0x1a62ea,_0x4223fe,_0x5cb25d['sender'],v);_0x109efd===!![]&&await _0x5cb25d[_0x5e1871(0x1ce)]['sendMessage'](_0x5cb25d['jid'],_0x5e1871(0x1e1),MessageType['text'],{'quoted':_0x5cb25d[_0x5e1871(0x1e0)]}),_0x109efd===0x194&&await _0x5cb25d['client']['sendMessage'](_0x5cb25d[_0x5e1871(0x1d4)],_0x5e1871(0x1e2),MessageType[_0x5e1871(0x1f5)],{'quoted':_0x5cb25d['data']}),_0x109efd===0x65&&await _0x5cb25d['client'][_0x5e1871(0x1e5)](_0x5cb25d[_0x5e1871(0x1d4)],'```Already\x20voted\x20âš ```',MessageType[_0x5e1871(0x1f5)],{'quoted':_0x5cb25d['data']});}),addCommand({'pattern':_0x2d277c(0x1db),'fromMe':!![],'desc':'Get\x20the\x20result\x20of\x20the\x20poll\x20conducted'},async(_0x1eabe4,_0x1c1e24)=>{var _0x314f0b=_0x2d277c,_0x43e438=_0x1eabe4[_0x314f0b(0x1ce)][_0x314f0b(0x1ed)]['jid']['split']('@')[0x0],_0x324ecd=_0x1eabe4[_0x314f0b(0x1d4)];try{var {topic:_0x1ae3f3,opt_one:_0x12eb8c,one:_0x728657,opt_two:_0x1b41d8,two:_0x3a4d21,opt_three:_0x566ae6,three:_0x3f7ef5}=await getPoll(_0x43e438,_0x324ecd,v);}catch{return await _0x1eabe4[_0x314f0b(0x1e5)](_0x314f0b(0x1ea));}if(_0x566ae6)var _0x9dcc89='*Poll\x20results\x20ðŸ“¢*\x0aQuestion:\x20'+_0x1ae3f3+'\x0a'+_0x12eb8c+':\x20'+_0x728657+'\x0a'+_0x1b41d8+':\x20'+_0x3a4d21+'\x0a'+_0x566ae6+':\x20'+_0x3f7ef5+'\x0a';else var _0x9dcc89=_0x314f0b(0x1f4)+_0x1ae3f3+'\x0a'+_0x12eb8c+':\x20'+_0x728657+'\x0a'+_0x1b41d8+':\x20'+_0x3a4d21+'\x0a';return await _0x1eabe4[_0x314f0b(0x1ce)][_0x314f0b(0x1e5)](_0x324ecd,_0x9dcc89,MessageType[_0x314f0b(0x1f5)],{'quoted':_0x1eabe4[_0x314f0b(0x1e0)]});}),addCommand({'pattern':'poll\x20delete','fromMe':!![],'desc':_0x2d277c(0x1e4)},async(_0x22a7e4,_0x15eefb)=>{var _0x1e34d4=_0x2d277c,_0x476e7e=_0x22a7e4[_0x1e34d4(0x1ce)]['user'][_0x1e34d4(0x1d4)][_0x1e34d4(0x1ee)]('@')[0x0],_0x5a3615=_0x22a7e4[_0x1e34d4(0x1d4)];try{await deletePoll(_0x476e7e,_0x5a3615,v);}catch{return await _0x22a7e4[_0x1e34d4(0x1e5)](_0x1e34d4(0x1ea));}return await _0x22a7e4[_0x1e34d4(0x1ce)][_0x1e34d4(0x1e5)](_0x5a3615,_0x1e34d4(0x1f0),MessageType[_0x1e34d4(0x1f5)],{'quoted':_0x22a7e4[_0x1e34d4(0x1e0)]});});function _0x93dc(_0x52ad00,_0x22a11e){var _0x2a9df3=_0x2a9d();return _0x93dc=function(_0x93dc98,_0x154ccd){_0x93dc98=_0x93dc98-0x1ce;var _0x3209e3=_0x2a9df3[_0x93dc98];return _0x3209e3;},_0x93dc(_0x52ad00,_0x22a11e);}function _0x2a9d(){var _0x120e20=['```Voted\x20âœ…```','```No\x20active\x20polls\x20found\x20âŒ```','poll\x20?(.*)','Get\x20the\x20result\x20of\x20the\x20poll\x20conducted','sendMessage','endsWith','@g.us','raganork-bot','vote;two','```No\x20polls\x20found\x20âŒ```','startsWith','11FOYNTW','user','split','8cMDmPX','```Successfully\x20deleted\x20âœ…```','vote','1315937bqIcRZ','WORKTYPE','*Poll\x20results\x20ðŸ“¢*\x0aQuestion:\x20','text','1055517AhXDRu','client','1991010buhSoX','4emHYFc','Sets\x20a\x20poll\x20in\x20group.\x20Format:\x20.poll\x20q/Question,b/Click\x20me,op/Option\x201,op/Option\x202','list','264155NaxkXl','jid','Give\x20me\x20the\x20format!','button','13prLKub','692541NCnbZn','4Nwvybq','public','poll\x20result','177076JbwOts','14612208fbFPlF','6pOBzvt','vote;one','data'];_0x2a9d=function(){return _0x120e20;};return _0x2a9d();}
addCommand({pattern: 'tagvote ?(.*)', fromMe: true, desc:'Tags list message'}, (async (m,ma) => { 
if (m.hasOwnProperty('reply_message') && m.reply_message.data.quotedMessage.hasOwnProperty('listMessage')) {
const l = {buttonText:m.reply_message.data.quotedMessage.listMessage.buttonText,description: m.reply_message.data.quotedMessage.listMessage.description,sections: m.reply_message.data.quotedMessage.listMessage.sections, listType: m.reply_message.data.quotedMessage.listMessage.listType};
var grup = await m.client.groupMetadata(m.jid);
var jids = [];
var msg = '';
grup['participants'].map(async (mention) => {
msg += '@' + mention.id.split('@')[0] + ' ';
jids.push(mention.id.replace('c.us', 's.whatsapp.net'));}); 
 await m.client.sendMessage(m.jid, l, MessageType.listMessage,{contextInfo: {mentionedJid: jids}, previewType: 0})
} else {m.sendMessage('Reply to a list message!')}
}));
        
