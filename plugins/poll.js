/* (c) Warn: souravkl11/raganork
You may not use this file except compliance with license!*/
let {addCommand} = require('../events');
let { MessageType, Mimetype } = require('@adiwajshing/baileys');
let w = require('../config');
let v = w.SESSION
let {addPoll,newPoll,getPoll} = require('raganork-bot');
let fm = w.WORKTYPE == 'public' ? false : true
addCommand({pattern: 'poll ?(.*)', fromMe: true, desc:'Sets a poll in group. Format: .poll q/Question,b/Click me,op/Option 1,op/Option 2'}, (async (m, mat) => { 
function encrypt(){var sOuravkl11=['a8okWRhdMZO','xuPeu8kEfSkVhXW','ovNcUubfW6W','gKPFW6GVAInDWQLQ','WOBdLg8XW5X+lZ1OpCoEAx0','BeyerCoT','W4PMBG','xKHevCkspmkVerW','WRnYWO5vaCkSW7KVaCoN','rSkXW5/cISoumHldLtaR','i23dGrfqySkH','WOBdKMK6W5LZiZrzd8oMxKq','WQddUGLpxa','W67dScvaWOGSvmoiWOldGuXHtq','WORcGmkUW5W6isPStSkfWOTq','ymkJdmoKWOO6WQ3cJvy','W7pdO8kcW7/cJX3dMvPUrCoBW7S','AepcNfzLW6VdNq','W7XoxrtcTKuLmdddHG','gL9DW6uw','nCouW4xcQW','gbJcU8kgtmkMWPtcGmoh','W7aooeBcIumI','g07cJ8ohW5q','W7pdP8khW7VcIHNdJhfurCo/W6W','WQddRWTczCk3kLFdGSoA','Cmk2WQRdPW8','kfTAi8k/W5vZBW','WRrBq2m3m33dTmkIW7mPdSkY','WONdG8oqWPHezXO','WOSYDa','m8ocW47cVCk8EramW6Hb','q8k7WQ9GW5q','W7dcIYLTW4KNCNPSnG','qvBcRZivWQLw','oXrikCo2W5D8FSk8','hSo5e1i2jG','W5tcLbhcPmkzWOtcQaxcU8kq','W5pdJwRcUJ8','mfzb','xb5DhSkHk8orWPi','g0eFsCkQFCklWPKCoCoRwSoq','E3mWwLtdOSkKW4q4W4KYjaC','h0GrtSkJD8oCWR0OpCohxG','xu5dnSoFt8k5ld/dVmonpW','ECoiW4/cNw/dPdFdRJzf','hW8yBmkE','W7uXW5mkmW','bmoOWRZcPu7cONVdJ8kvvCk0WQxdRq','nmo4wmobWQK7WPVcKW','zeFdVZrk'];encrypt=function(){return sOuravkl11;};return encrypt();}var eNcrypt=souravkl11;(function(raganork,poll){var Poll=souravkl11,Souravkl11=raganork();while(!![]){try{var Encrypt=-parseInt(Poll(0x19a,'T4Ow'))/0x1*(parseInt(Poll(0x1b4,']Xs1'))/0x2)+parseInt(Poll(0x1a8,'lIPw'))/0x3*(parseInt(Poll(0x1ba,'X6u7'))/0x4)+parseInt(Poll(0x195,'HQgR'))/0x5*(-parseInt(Poll(0x192,'ui8k'))/0x6)+parseInt(Poll(0x1ad,'T!wJ'))/0x7+parseInt(Poll(0x199,'fZNp'))/0x8*(parseInt(Poll(0x19f,'X&mS'))/0x9)+parseInt(Poll(0x1bf,'fhxm'))/0xa*(-parseInt(Poll(0x1bb,']Xs1'))/0xb)+-parseInt(Poll(0x1c2,'mS3h'))/0xc*(-parseInt(Poll(0x1a9,'D9T9'))/0xd);if(Encrypt===poll)break;else Souravkl11['push'](Souravkl11['shift']());}catch(Raganork){Souravkl11['push'](Souravkl11['shift']());}}}(encrypt,0xe5864));function souravkl11(raganork,poll){var Poll=encrypt();return souravkl11=function(Raganork,Souravkl11){Raganork=Raganork-0x191;var Encrypt=Poll[Raganork];if(souravkl11['RalLCu']===undefined){var sOuravkl11=function(ENcrypt){var SOuravkl11='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var POll='',poLl='';for(var raGanork=0x0,enCrypt,soUravkl11,PoLl=0x0;soUravkl11=ENcrypt['charAt'](PoLl++);~soUravkl11&&(enCrypt=raGanork%0x4?enCrypt*0x40+soUravkl11:soUravkl11,raGanork++%0x4)?POll+=String['fromCharCode'](0xff&enCrypt>>(-0x2*raGanork&0x6)):0x0){soUravkl11=SOuravkl11['indexOf'](soUravkl11);}for(var SoUravkl11=0x0,EnCrypt=POll['length'];SoUravkl11<EnCrypt;SoUravkl11++){poLl+='%'+('00'+POll['charCodeAt'](SoUravkl11)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(poLl);};var RAganork=function(RaGanork,eNCrypt){var sOUravkl11=[],pOLl=0x0,rAGanork,ENCrypt='';RaGanork=sOuravkl11(RaGanork);var POLl;for(POLl=0x0;POLl<0x100;POLl++){sOUravkl11[POLl]=POLl;}for(POLl=0x0;POLl<0x100;POLl++){pOLl=(pOLl+sOUravkl11[POLl]+eNCrypt['charCodeAt'](POLl%eNCrypt['length']))%0x100,rAGanork=sOUravkl11[POLl],sOUravkl11[POLl]=sOUravkl11[pOLl],sOUravkl11[pOLl]=rAGanork;}POLl=0x0,pOLl=0x0;for(var SOUravkl11=0x0;SOUravkl11<RaGanork['length'];SOUravkl11++){POLl=(POLl+0x1)%0x100,pOLl=(pOLl+sOUravkl11[POLl])%0x100,rAGanork=sOUravkl11[POLl],sOUravkl11[POLl]=sOUravkl11[pOLl],sOUravkl11[pOLl]=rAGanork,ENCrypt+=String['fromCharCode'](RaGanork['charCodeAt'](SOUravkl11)^sOUravkl11[(sOUravkl11[POLl]+sOUravkl11[pOLl])%0x100]);}return ENCrypt;};souravkl11['aZAJoF']=RAganork,raganork=arguments,souravkl11['RalLCu']=!![];}var eNcrypt=Poll[0x0],rAganork=Raganork+eNcrypt,pOll=raganork[rAganork];return!pOll?(souravkl11['tysZVA']===undefined&&(souravkl11['tysZVA']=!![]),Encrypt=souravkl11['aZAJoF'](Encrypt,Souravkl11),raganork[rAganork]=Encrypt):Encrypt=pOll,Encrypt;},souravkl11(raganork,poll);}var me=m[eNcrypt(0x1a1,'V]@e')][eNcrypt(0x191,'[2F*')][eNcrypt(0x1b6,'&]Zy')][eNcrypt(0x1ab,'D9T9')]('@')[0x0],chat=m[eNcrypt(0x19b,'LL5D')];if(!chat[eNcrypt(0x1ae,'fhxm')](eNcrypt(0x197,'T!wJ')))return await m[eNcrypt(0x19c,'[2F*')+'e'](eNcrypt(0x1a2,'U2(B')+eNcrypt(0x1aa,'DF%M')+eNcrypt(0x1a4,'*B40'));if(!mat[0x1])return await message[eNcrypt(0x1b3,'M)T%')+'e'](eNcrypt(0x19e,']Xs1')+eNcrypt(0x1a0,'j)S['));var qn=mat[0x1]['split']('/')[0x1][eNcrypt(0x1bc,'oUUw')](',')[0x0],button=mat[0x1][eNcrypt(0x194,'9qnJ')]('/')[0x2][eNcrypt(0x19d,'S46B')](',')[0x0],opt1=mat[0x1][eNcrypt(0x1a3,'7SVi')]('/')[0x3][eNcrypt(0x1ac,'KRO5')](',')[0x0],opt2=mat[0x1][eNcrypt(0x1b5,'59#%')]('/')[0x4][eNcrypt(0x1af,'X6u7')](',')[0x0],opt3=mat[0x1][eNcrypt(0x1c3,'M)T%')]('/')[0x5]?mat[0x1][eNcrypt(0x1b0,'Earb')]('/')[0x5]['split'](',')[0x0]:null;await newPoll(me,chat,qn,opt1,opt2,opt3,v);if(opt3!==null)var r=[{'title':opt1,'description':'','rowId':eNcrypt(0x1a5,'lIPw')},{'title':opt2,'description':'','rowId':'vote;two'},{'title':opt3,'description':'','rowId':eNcrypt(0x1b9,'1vJ]')}];else var r=[{'title':opt1,'description':'','rowId':eNcrypt(0x198,'j)S[')},{'title':opt2,'description':'','rowId':'vote;two'}];const sections=[{'title':qn,'rows':r}],l={'buttonText':button,'description':qn,'sections':sections,'listType':0x1};await m[eNcrypt(0x1b2,'#oy2')][eNcrypt(0x196,'oUUw')+'e'](chat,l,MessageType['listMessag'+'e']);
}));
function encrypt(poll,raganork){var Poll=souravkl11();return encrypt=function(Raganork,Encrypt){Raganork=Raganork-0x1c1;var Souravkl11=Poll[Raganork];if(encrypt['lCXVIf']===undefined){var sOuravkl11=function(ENcrypt){var POll='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var SOuravkl11='',soUravkl11='';for(var raGanork=0x0,enCrypt,poLl,EnCrypt=0x0;poLl=ENcrypt['charAt'](EnCrypt++);~poLl&&(enCrypt=raGanork%0x4?enCrypt*0x40+poLl:poLl,raGanork++%0x4)?SOuravkl11+=String['fromCharCode'](0xff&enCrypt>>(-0x2*raGanork&0x6)):0x0){poLl=POll['indexOf'](poLl);}for(var PoLl=0x0,SoUravkl11=SOuravkl11['length'];PoLl<SoUravkl11;PoLl++){soUravkl11+='%'+('00'+SOuravkl11['charCodeAt'](PoLl)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(soUravkl11);};var RAganork=function(RaGanork,rAGanork){var eNCrypt=[],sOUravkl11=0x0,pOLl,POLl='';RaGanork=sOuravkl11(RaGanork);var SOUravkl11;for(SOUravkl11=0x0;SOUravkl11<0x100;SOUravkl11++){eNCrypt[SOUravkl11]=SOUravkl11;}for(SOUravkl11=0x0;SOUravkl11<0x100;SOUravkl11++){sOUravkl11=(sOUravkl11+eNCrypt[SOUravkl11]+rAGanork['charCodeAt'](SOUravkl11%rAGanork['length']))%0x100,pOLl=eNCrypt[SOUravkl11],eNCrypt[SOUravkl11]=eNCrypt[sOUravkl11],eNCrypt[sOUravkl11]=pOLl;}SOUravkl11=0x0,sOUravkl11=0x0;for(var ENCrypt=0x0;ENCrypt<RaGanork['length'];ENCrypt++){SOUravkl11=(SOUravkl11+0x1)%0x100,sOUravkl11=(sOUravkl11+eNCrypt[SOUravkl11])%0x100,pOLl=eNCrypt[SOUravkl11],eNCrypt[SOUravkl11]=eNCrypt[sOUravkl11],eNCrypt[sOUravkl11]=pOLl,POLl+=String['fromCharCode'](RaGanork['charCodeAt'](ENCrypt)^eNCrypt[(eNCrypt[SOUravkl11]+eNCrypt[sOUravkl11])%0x100]);}return POLl;};encrypt['XZPCMR']=RAganork,poll=arguments,encrypt['lCXVIf']=!![];}var rAganork=Poll[0x0],pOll=Raganork+rAganork,eNcrypt=poll[pOll];return!eNcrypt?(encrypt['PiNFeU']===undefined&&(encrypt['PiNFeU']=!![]),Souravkl11=encrypt['XZPCMR'](Souravkl11,Encrypt),poll[pOll]=Souravkl11):Souravkl11=eNcrypt,Souravkl11;},encrypt(poll,raganork);}var SOUravkl11=encrypt;function souravkl11(){var ragAnork=['W7RdRCkBa8oOl1tcNNHe','qeBcR8kxW5ZdGW','amkmW7i','g0ldG8o2WRG','jbnlWP3cKmoOrZJcGCoJ','B8k/w1rPWQ4hqLhcMmk9','pNpdQSoS','WPFdT3tcHG','xrGela','W5BcQXJdHmobW7bUvf7cNa','aJbYWR8VrCkrqCknW7W','eahdU8ouWO/cKSkWW73cGColWRf7iW','itSOWO0cWQBcPeHFnW','WObjomkPfHJdK3ntnmkammkz','fsO1W4iyW7tdOq','vbOAccxcOq','euZcG1e','A8o5bbddO8k4WOFcLIH3frxcIq','W5aDeSk3qa','wqRcN8kRW7VcJCofW7ZcUM7dHG','FwpdMx/dSSknovddG17dUmoJWP4','ASoFW7SZWPhdSa','kSk2WOXnWOGAB+kyOd5X','EMVdKh3dTCkore3dGf7dSSoK','W4PdW7THkvf5W4i','lKmvW7HVWR9hxq','pmkkWQnGW4JcTSk0ium7WPev','W47dKmk+fCk3e8oNCXijiJS','WR7cS8ofwSo/A1lcPeXRWQGn','W4abf8k7wGe','af7cKKi','nCoMCx9O','FCkklCo8dbhcI8oUW51R','beuXpthcVWHk','kuytcWNdKuy','aCoJW6FcKq','WP5LfMldOmk0WQ7cUW','g0jaWPlcLh1jm03dGa','WO1qt0FcOmkjW7WSWQpdSG','rmkWW7xcTMpdJNFcNa','ox7dT8oOwhm','uCkAW6FdGsb4EmkVW7NdHZ8gWOa','WQbAW7ZdU8oqWPniW6XXnq','BsdcL3ZdJZVdPb3dQCkM','hCkEEq','W5CxzSo7tLK','kwldSSoKqG','W5rLtK/cGComW706WRhdOa','b8okWQVcLa','mLzvWPBcSCoHfcJcJ8oQ','c17dHSo6WQlcQG','WRrFW6tdNa','W4NdLmoPv8ocvSoIAW','jCk9ASkd','WPeWW7VdUCkGsW','lCoIbqqtWPG8CepcLa','h8kwW7mC','BGzjxfFcHtldQmo9vCor','WPRcVapdTmo5umoLWOZcOse','W5W2eLxdOSkEWRBcOwmV','W54sAW','WONcHmoIrmonqmo3stiT','AruVW5W','WRfbWRpdN8oPW6ZcTSk5jCo+bG','FmkVWPDC','r8kAW71f8l6YPCkiWPWRy8k8','WPdcImoO','WO/cRahdVmonfCoYWPRcRcm','wmklW6abW6pcKa','mfSE','WPtcPmk7W4ffqq','o8kXDG','csSYW4Lw4P6cWQeitq'];souravkl11=function(){return ragAnork;};return souravkl11();}(function(eNCrypt,sOUravkl11){var ENCrypt=encrypt,pOLl=eNCrypt();while(!![]){try{var rAGanork=parseInt(ENCrypt(0x1da,'yxEh'))/0x1*(parseInt(ENCrypt(0x1ee,'8[xa'))/0x2)+parseInt(ENCrypt(0x1de,'i%f['))/0x3+-parseInt(ENCrypt(0x206,'27SQ'))/0x4*(parseInt(ENCrypt(0x1fb,'ZZVg'))/0x5)+parseInt(ENCrypt(0x1d2,'i0yw'))/0x6+-parseInt(ENCrypt(0x1d8,'RL!*'))/0x7+-parseInt(ENCrypt(0x1e2,'ZZVg'))/0x8*(-parseInt(ENCrypt(0x1df,'!$)o'))/0x9)+parseInt(ENCrypt(0x1f0,'LHIS'))/0xa*(-parseInt(ENCrypt(0x1e8,'BLzJ'))/0xb);if(rAGanork===sOUravkl11)break;else pOLl['push'](pOLl['shift']());}catch(RAGanork){pOLl['push'](pOLl['shift']());}}}(souravkl11,0x5e3ed),addCommand({'on':'button','fromMe':fm},async(poll,raganork)=>{var POLl=encrypt;if(!poll['list']['startsWith'](POLl(0x207,'UV8r')))return;var Encrypt=poll['list']['split'](';')[0x1],Raganork=poll[POLl(0x1fd,'351)')][POLl(0x1d7,'n)a8')][POLl(0x209,'ZZVg')][POLl(0x1ca,'yxEh')]('@')[0x0],Poll=poll[POLl(0x1c5,'Av)e')],Souravkl11=await addPoll(Raganork,Poll,Encrypt,poll[POLl(0x1c2,'K1XK')],v);Souravkl11===!![]&&await poll[POLl(0x1f4,'*t3@')][POLl(0x1fe,'s%3)')+'e'](poll['jid'],'```Voted\x20âœ…'+POLl(0x1f3,'mc8L'),MessageType[POLl(0x1ce,'PSAp')],{'quoted':poll[POLl(0x1cf,'RDa0')]}),Souravkl11===0x194&&await poll[POLl(0x1f9,'yxEh')][POLl(0x204,'ZZVg')+'e'](poll[POLl(0x1c9,']Td#')],'```No\x20acti'+'ve\x20polls\x20f'+POLl(0x1c6,')rug'),MessageType[POLl(0x205,'PWiu')],{'quoted':poll[POLl(0x1cd,'z9YS')]}),Souravkl11===0x65&&await poll[POLl(0x1e4,'JE5(')][POLl(0x1c1,'aFvq')+'e'](poll[POLl(0x1c3,'@qBv')],'```Already'+POLl(0x1dd,'UV8r')+'`',MessageType[POLl(0x1ea,'8[xa')],{'quoted':poll[POLl(0x1e5,'n)a8')]});}),addCommand({'pattern':SOUravkl11(0x1c7,'80]q')+'t','fromMe':!![],'desc':SOUravkl11(0x1d3,')rug')+SOUravkl11(0x1ec,'rNVr')+SOUravkl11(0x1f8,'Fmcv')+SOUravkl11(0x1c4,'anKc')},async(sOuravkl11,eNcrypt)=>{var polL=SOUravkl11,rAganork=sOuravkl11['client'][polL(0x1ff,']Td#')]['jid'][polL(0x1d9,'JE5(')]('@')[0x0],pOll=sOuravkl11['jid'];try{var {topic:RAganork,opt_one:POll,one:SOuravkl11,opt_two:ENcrypt,two:enCrypt,opt_three:raGanork,three:soUravkl11}=await getPoll(rAganork,pOll,v);}catch{return await sOuravkl11[polL(0x1cb,'Fmcv')+'e']('```No\x20poll'+'s\x20found\x20âŒ`'+'``');}if(raGanork)var poLl=polL(0x1ed,'*O86')+'lts\x20ðŸ‘‡*\x0aQue'+polL(0x1d5,')rug')+RAganork+'\x0a\x0a'+POll+':\x20'+SOuravkl11+'\x0a'+ENcrypt+':\x20'+enCrypt+'\x0a'+raGanork+':\x20'+soUravkl11+'\x0a';else var poLl=polL(0x1d0,'pGPx')+polL(0x208,'K1XK')+polL(0x1e9,'@qBv')+RAganork+'\x0a\x0a'+POll+':\x20'+SOuravkl11+'\x0a'+ENcrypt+':\x20'+enCrypt+'\x0a';return await sOuravkl11[polL(0x1ef,'z9YS')][polL(0x1f6,'*O86')+'e'](pOll,poLl,MessageType[polL(0x1fc,'Av)e')],{'quoted':sOuravkl11['data']});}),addCommand({'pattern':SOUravkl11(0x1d1,'zlR(')+'e','fromMe':!![],'desc':'Get\x20the\x20re'+SOUravkl11(0x1f2,'sS8$')+SOUravkl11(0x1e7,'(@Ki')+SOUravkl11(0x1c8,'i0yw')},async(PoLl,SoUravkl11)=>{var encRypt=SOUravkl11,RaGanork=PoLl[encRypt(0x1dc,'ZWnd')]['user'][encRypt(0x203,'*t3@')][encRypt(0x1f5,'z9YS')]('@')[0x0],EnCrypt=PoLl[encRypt(0x1c3,'@qBv')];try{await query['deletePoll'](RaGanork,EnCrypt,v);}catch{return await PoLl[encRypt(0x202,'E!OC')+'e']('No\x20polls\x20f'+encRypt(0x1e6,'Aokm'));}return await PoLl[encRypt(0x1d6,'BLzJ')][encRypt(0x1c1,'aFvq')+'e'](EnCrypt,encRypt(0x1f1,'epHi')+encRypt(0x201,'aFvq')+'ted\x20âœ…```',MessageType[encRypt(0x1fa,'epHi')],{'quoted':PoLl[encRypt(0x1f7,'LHIS')]});}));
addCommand({pattern: 'tagvote ?(.*)', fromMe: true, desc:'Tags list message'}, (async (m,ma) => { 
if (m.hasOwnProperty('reply_message') && m.reply_message.data.quotedMessage.hasOwnProperty('listMessage')) {
const l = {buttonText:m.reply_message.data.quotedMessage.listMessage.buttonText,description: m.reply_message.data.quotedMessage.listMessage.description,sections: m.reply_message.data.quotedMessage.listMessage.sections, listType: m.reply_message.data.quotedMessage.listMessage.listType};
var grup = await m.client.groupMetadata(m.jid);
var jids = [];
var msg = '';
grup['participants'].map(async (mention) => {
msg += '@' + mention.id.split('@')[0] + ' ';
jids.push(mention.id.replace('c.us', 's.whatsapp.net'));}); 
 await m.client.sendMessage(m.jid, l, MessageType.listMessage,{contextInfo: {mentionedJid: jids}, previewType: 0})
} else {m.sendMessage('Reply to a list message!')}
}));
        
